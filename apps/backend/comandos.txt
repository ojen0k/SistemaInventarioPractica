1.- Correr apps
Correr back: /apps/backend
pnpm start:dev

Correr Front: /apps/frontend
pnpm dev


2.- Instalar dependencias:

Para instalar usando pnpm se debe tenemos primero pnpm:
pnpm install

Dependencias de AuthModule(jwt):
pnpm add @nestjs/jwt passport passport-jwt bcrypt
pnpm add -D @types/passport-jwt @types/bcrypt

Passport:
pnpm add @nestjs/passport passport passport-jwt
pnpm add -D @types/passport-jwt


Class-validator:
pnpm add class-validator class-transformer




3.- Generar cliente y validar:

pnpm dlx prisma validate (valida que el schema sea correcto)
pnpm dlx prisma generate (genera el cliente)


Subir a la base de datos con push:

pnpm dlx prisma db push (sincroniza el schema con la base de datos)
pnpm dlx prisma generate (genera el cliente)


Formatear el schema: (identacion, orden, estilo)

pnpm dlx prisma format


orden de comandos:

1.- pnpm dlx prisma format
2.- pnpm dlx prisma validate
3.- pnpm dlx prisma db push
4.- pnpm dlx prisma generate



4.- Para agregar areas y estados de los catalogos (llamados cat_*nombre* dentro de la BD), se usan los comandos:

pnpm seed:areas (agrega areas y subareas)
pnpm seed:catalogos (agrega estados de los catalogos) 

cada seed tiene su .json y readme para las instrucciones de como usarlo y agregar datos


5.- Bootstrap de admin (si es que está en true el valor del .env):
pnpm bootstrap:admin


 Querys en SQL Server:

Para ver las areas y subareas:

-- 1) Conteos
SELECT COUNT(*) AS areas FROM dbo.area;
SELECT COUNT(*) AS direcciones FROM dbo.direccion;
SELECT COUNT(*) AS departamentos FROM dbo.departamento;
SELECT COUNT(*) AS oficinas FROM dbo.oficina;
SELECT COUNT(*) AS secciones_programas FROM dbo.seccion_programa;

-- 2) Ver algunos datos
SELECT TOP 20 * FROM dbo.area ORDER BY id_area;
SELECT TOP 20 * FROM dbo.direccion ORDER BY id_direccion;
SELECT TOP 20 * FROM dbo.departamento ORDER BY id_departamento;
SELECT TOP 20 * FROM dbo.oficina ORDER BY id_oficina;
SELECT TOP 20 * FROM dbo.seccion_programa ORDER BY id_seccion_programa;

-- 3) Ver la jerarquía completa (join)
SELECT TOP 200
  a.nombre AS area,
  d.nombre AS direccion,
  dep.nombre AS departamento,
  o.nombre AS oficina,
  sp.nombre AS seccion_programa
FROM dbo.seccion_programa sp
JOIN dbo.oficina o            ON o.id_oficina = sp.id_oficina
JOIN dbo.departamento dep     ON dep.id_departamento = o.id_departamento
JOIN dbo.direccion d          ON d.id_direccion = dep.id_direccion
JOIN dbo.area a               ON a.id_area = d.id_area
ORDER BY a.nombre, d.nombre, dep.nombre, o.nombre, sp.nombre;

